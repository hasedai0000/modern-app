---
description: "APIエンドポイント設計書 - ルーティングとコントローラーの実装ガイド"
globs: ["**/routes/**", "**/Controllers/**", "**/api.php", "**/web.php"]
alwaysApply: false
---

# API エンドポイント設計書

## 目次

1. [認証関連](#認証関連)
2. [ユーザー関連](#ユーザー関連)
3. [投稿関連](#投稿関連)
4. [いいね関連](#いいね関連)
5. [コメント関連](#コメント関連)

---

## 認証関連

### POST /api/auth/register

Firebase 認証後にユーザー情報を Laravel DB に登録する

| 項目                     | 内容                                                         |
| ------------------------ | ------------------------------------------------------------ |
| メソッド                 | POST                                                         |
| コントローラーファイル名 | AuthController.php                                           |
| アクション               | register                                                     |
| 認証必須                 | ×                                                            |
| 説明                     | Firebase 認証後にユーザー情報を Laravel DB に登録する        |
| リクエストボディ         | `firebase_uid: string`, `user_name: string`, `email: string` |
| クエリパラメータ         | -                                                            |

---

## ユーザー関連

### GET /api/user

現在のログインユーザー情報を取得する

| 項目                     | 内容                                 |
| ------------------------ | ------------------------------------ |
| メソッド                 | GET                                  |
| コントローラーファイル名 | UserController.php                   |
| アクション               | show                                 |
| 認証必須                 | ○                                    |
| 説明                     | 現在のログインユーザー情報を取得する |
| リクエストボディ         | -                                    |
| クエリパラメータ         | -                                    |

---

## 投稿関連

### GET /api/posts

投稿一覧を取得する

| 項目                     | 内容                                                                             |
| ------------------------ | -------------------------------------------------------------------------------- |
| メソッド                 | GET                                                                              |
| コントローラーファイル名 | PostController.php                                                               |
| アクション               | index                                                                            |
| 認証必須                 | ×                                                                                |
| 説明                     | 投稿一覧を取得する（ユーザー名、投稿内容、投稿日時、いいね数、コメント数を含む） |
| リクエストボディ         | -                                                                                |
| クエリパラメータ         | `page: integer`（ページネーション用）                                            |

### POST /api/posts

新しい投稿を追加する

| 項目                     | 内容                                    |
| ------------------------ | --------------------------------------- |
| メソッド                 | POST                                    |
| コントローラーファイル名 | PostController.php                      |
| アクション               | store                                   |
| 認証必須                 | ○                                       |
| 説明                     | 新しい投稿を追加する                    |
| リクエストボディ         | `content: string`（必須、120 文字以内） |
| クエリパラメータ         | -                                       |

### GET /api/posts/{id}

指定された投稿を取得する

| 項目                     | 内容                                                                                   |
| ------------------------ | -------------------------------------------------------------------------------------- |
| メソッド                 | GET                                                                                    |
| コントローラーファイル名 | PostController.php                                                                     |
| アクション               | show                                                                                   |
| 認証必須                 | ×                                                                                      |
| 説明                     | 指定された投稿を取得する（ユーザー名、投稿内容、投稿日時、いいね数、コメント数を含む） |
| リクエストボディ         | -                                                                                      |
| クエリパラメータ         | -                                                                                      |

### DELETE /api/posts/{id}

投稿を削除する

| 項目                     | 内容                             |
| ------------------------ | -------------------------------- |
| メソッド                 | DELETE                           |
| コントローラーファイル名 | PostController.php               |
| アクション               | destroy                          |
| 認証必須                 | ○                                |
| 説明                     | 投稿を削除する（投稿者のみ可能） |
| リクエストボディ         | -                                |
| クエリパラメータ         | -                                |

---

## いいね関連

### POST /api/posts/{id}/like

いいねの追加/削除を切り替える

| 項目                     | 内容                                        |
| ------------------------ | ------------------------------------------- |
| メソッド                 | POST                                        |
| コントローラーファイル名 | LikeController.php                          |
| アクション               | toggleLike                                  |
| 認証必須                 | ○                                           |
| 説明                     | いいねの追加/削除を切り替える（トグル機能） |
| リクエストボディ         | -                                           |
| クエリパラメータ         | -                                           |

---

## コメント関連

### GET /api/posts/{id}/comments

指定された投稿のコメント一覧を取得する

| 項目                     | 内容                                                                                   |
| ------------------------ | -------------------------------------------------------------------------------------- |
| メソッド                 | GET                                                                                    |
| コントローラーファイル名 | CommentController.php                                                                  |
| アクション               | index                                                                                  |
| 認証必須                 | ×                                                                                      |
| 説明                     | 指定された投稿のコメント一覧を取得する（ユーザー名、コメント内容、コメント日時を含む） |
| リクエストボディ         | -                                                                                      |
| クエリパラメータ         | -                                                                                      |

### POST /api/posts/{id}/comments

指定された投稿にコメントを追加する

| 項目                     | 内容                                    |
| ------------------------ | --------------------------------------- |
| メソッド                 | POST                                    |
| コントローラーファイル名 | CommentController.php                   |
| アクション               | store                                   |
| 認証必須                 | ○                                       |
| 説明                     | 指定された投稿にコメントを追加する      |
| リクエストボディ         | `content: string`（必須、120 文字以内） |
| クエリパラメータ         | -                                       |

---

## エンドポイント一覧表

| パス                     | メソッド | コントローラーファイル名 | アクション | 認証必須 | 説明                                                                                   | リクエストボディ                                       | クエリパラメータ                    |
| ------------------------ | -------- | ------------------------ | ---------- | -------- | -------------------------------------------------------------------------------------- | ------------------------------------------------------ | ----------------------------------- |
| /api/auth/register       | POST     | AuthController.php       | register   | ×        | Firebase 認証後にユーザー情報を Laravel DB に登録する                                  | firebase_uid: string, user_name: string, email: string | -                                   |
| /api/user                | GET      | UserController.php       | show       | ○        | 現在のログインユーザー情報を取得する                                                   | -                                                      | -                                   |
| /api/posts               | GET      | PostController.php       | index      | ×        | 投稿一覧を取得する（ユーザー名、投稿内容、投稿日時、いいね数、コメント数を含む）       | -                                                      | page: integer（ページネーション用） |
| /api/posts               | POST     | PostController.php       | store      | ○        | 新しい投稿を追加する                                                                   | content: string（必須、120 文字以内）                  | -                                   |
| /api/posts/{id}          | GET      | PostController.php       | show       | ×        | 指定された投稿を取得する（ユーザー名、投稿内容、投稿日時、いいね数、コメント数を含む） | -                                                      | -                                   |
| /api/posts/{id}          | DELETE   | PostController.php       | destroy    | ○        | 投稿を削除する（投稿者のみ可能）                                                       | -                                                      | -                                   |
| /api/posts/{id}/like     | POST     | LikeController.php       | toggleLike | ○        | いいねの追加/削除を切り替える（トグル機能）                                            | -                                                      | -                                   |
| /api/posts/{id}/comments | GET      | CommentController.php    | index      | ×        | 指定された投稿のコメント一覧を取得する（ユーザー名、コメント内容、コメント日時を含む） | -                                                      | -                                   |
| /api/posts/{id}/comments | POST     | CommentController.php    | store      | ○        | 指定された投稿にコメントを追加する                                                     | content: string（必須、120 文字以内）                  | -                                   |
