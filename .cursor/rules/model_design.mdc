---
description: "Model クラス設計書 - Eloquentモデルの実装仕様"
globs: ["**/Models/**", "**/Model/**", "**/app/Models/**", "**/app/Model/**"]
alwaysApply: false
---

# Model クラス設計書

## 目次

1. [Model 一覧](#model一覧)
2. [Model 詳細](#model詳細)

---

## Model 一覧

| Model ファイル名 | 説明                          |
| ---------------- | ----------------------------- |
| User.php         | users テーブル操作用モデル    |
| Post.php         | posts テーブル操作用モデル    |
| Like.php         | likes テーブル操作用モデル    |
| Comment.php      | comments テーブル操作用モデル |

---

## Model 詳細

### User.php

users テーブル操作用モデル

**対応テーブル**: `users`

**主な機能**:

- ユーザー情報の取得・作成・更新・削除
- メールアドレスによるユーザー検索
- 投稿、いいね、コメントとのリレーション定義

**リレーション**:

- `hasMany(Post::class)` - ユーザーは複数の投稿を持つ
- `hasMany(Like::class)` - ユーザーは複数のいいねを持つ
- `hasMany(Comment::class)` - ユーザーは複数のコメントを持つ

---

### Post.php

posts テーブル操作用モデル

**対応テーブル**: `posts`

**主な機能**:

- 投稿情報の取得・作成・更新・削除
- ユーザー、いいね、コメントとのリレーション定義
- いいね数・コメント数の集計

**リレーション**:

- `belongsTo(User::class)` - 投稿は 1 人のユーザーに属する
- `hasMany(Like::class)` - 投稿は複数のいいねを持つ
- `hasMany(Comment::class)` - 投稿は複数のコメントを持つ

---

### Like.php

likes テーブル操作用モデル

**対応テーブル**: `likes`

**主な機能**:

- いいね情報の取得・作成・削除
- ユーザーと投稿とのリレーション定義
- 同一ユーザーが同一投稿に複数回いいねできない制約の管理

**リレーション**:

- `belongsTo(User::class)` - いいねは 1 人のユーザーに属する
- `belongsTo(Post::class)` - いいねは 1 つの投稿に属する

---

### Comment.php

comments テーブル操作用モデル

**対応テーブル**: `comments`

**主な機能**:

- コメント情報の取得・作成・更新・削除
- ユーザーと投稿とのリレーション定義
- 特定の投稿に対するコメント一覧の取得

**リレーション**:

- `belongsTo(User::class)` - コメントは 1 人のユーザーに属する
- `belongsTo(Post::class)` - コメントは 1 つの投稿に属する

---

## 命名規則

本プロジェクトでは、以下の命名規則に従います：

- **Model ファイル名**: 単数形、パスカルケース（例: `User.php`, `Post.php`）
- **テーブル名**: 複数形、スネークケース（例: `users`, `posts`）

この規則により、Laravel の規約に従いながら、プロジェクトの一貫性を保ちます。
